/**
 * @prop --cbp-card-color-background: var(--cbp-color-white)
 * @prop --cbp-card-color-background-dark: var(--cbp-color-gray-cool-60);
 * @prop --cbp-card-color-border: var(--cbp-color-gray-cool-10);
 * @prop --cbp-card-color-border-dark: var(--cbp-color-gray-cool-50);
 * @prop --cbp-card-color-title: var(--cbp-color-text-darker);
 * @prop --cbp-card-color-title-dark: var(--cbp-color-text-lighter);
 * @prop --cbp-banner-card-color: var(--cbp-color-gray-cool-60);
 * @prop --cbp-banner-card-color-dark: var(--cbp-color-gray-cool-20);
 * @prop --cbp-banner-card-color-title: var(--cbp-color-text-lighter);
 * @prop --cbp-banner-card-color-title-dark: var(--cbp-color-text-darker);
 * @prop --cbp-banner-card-color-body-background: var(--cbp-color-white);
 * @prop --cbp-banner-card-color-body-background-dark: var(--cbp-color-gray-cool-60);
*/

:root {
  --cbp-card-color-background: var(--cbp-color-white);
  --cbp-card-color-background-dark: var(--cbp-color-gray-cool-60);
  --cbp-card-color-border: var(--cbp-color-gray-cool-10);
  --cbp-card-color-border-dark: var(--cbp-color-gray-cool-50);
  --cbp-card-color-title: var(--cbp-color-text-darker);
  --cbp-card-color-title-dark: var(--cbp-color-text-lighter);
  --cbp-card-color-text: var(--cbp-color-text-darker);
  --cbp-card-color-text-dark: var(--cbp-color-text-lightest);
  
  --cbp-banner-card-color: var(--cbp-color-gray-cool-60);
  --cbp-banner-card-color-dark: var(--cbp-color-gray-cool-20); 
  --cbp-banner-card-color-title: var(--cbp-color-text-lighter);
  --cbp-banner-card-color-title-dark: var(--cbp-color-text-darker);
  --cbp-banner-card-color-body-background: var(--cbp-color-white);
  --cbp-banner-card-color-body-background-dark: var(--cbp-color-gray-cool-60);
  --cbp-banner-card-border: var(--cbp-color-base-neutral-lighter);
  --cbp-banner-card-border-dark: var(--cbp-color-gray-cool-50);

  --cbp-card-info-color-background: var(--cbp-color-info-lighter);
  --cbp-card-info-color-background-dark: var(--cbp-color-info-darker);
  --cbp-card-info-border: var(--cbp-color-info-light);
  --cbp-card-info-border-dark: var(--cbp-color-info-light);
  --cbp-card-info-color-title: var(--cbp-color-info-darker);
  --cbp-card-info-color-title-dark: var(--cbp-color-text-lighter);
  --cbp-card-info-banner-color: var(--cbp-color-info-dark);
  --cbp-card-info-banner-color-dark: var(--cbp-color-info-light);
  --cbp-card-info-banner-color-background: var(--cbp-color-info-lighter);
  --cbp-card-info-banner-color-background-dark: var(--cbp-color-info-darker);
  

  --cbp-card-success-color-background: var(--cbp-color-success-lighter);
  --cbp-card-success-color-background-dark: var(--cbp-color-success-darker);
  --cbp-card-success-color-border: var(--cbp-color-sucess-light);
  --cbp-card-success-color-border-dark: var(--cbp-color-success-light); 
  --cbp-card-success-color-title: var(--cbp-color-success-darker);
  --cbp-card-success-color-title-dark: var(--cbp-color-text-lighter); 
  --cbp-card-success-banner-color: var(--cbp-color-success-dark);
  --cbp-card-success-banner-color-dark: var(--cbp-color-success-light);
  --cbp-card-success-banner-color-background: var(--cbp-color-success-lighter);
  --cbp-card-success-banner-color-background-dark: var(--cbp-color-success-darker); 

  --cbp-card-warning-color-background: var(--cbp-color-warning-lighter);
  --cbp-card-warning-color-background-dark: var(--cbp-color-warning-base);
  --cbp-card-warning-border: var(--cbp-color-warning-light);
  --cbp-card-warning-border-dark: var(--cbp-color-warning-light);
  --cbp-card-warning-banner-color: var(--cbp-color-warning-base);
  --cbp-card-warning-banner-color-dark: var(--cbp-color-warning-light);
  --cbp-card-warning-banner-color-title: var(--cbp-color-text-darker);
  --cbp-card-warning-banner-color-title-dark: var(--cbp-color-text-darker);
  --cbp-card-warning-banner-color-background: var(--cbp-color-warning-lighter);
  --cbp-card-warning-banner-color-background-dark: var(--cbp-color-warning-base);

  --cbp-card-danger-color-background: var(--cbp-color-danger-lighter);
  --cbp-card-danger-color-background-dark: var(--cbp-color-danger-darker);
  --cbp-card-danger-color-border: var(--cbp-color-danger-light);
  --cbp-card-danger-color-border-dark: var(--cbp-color-danger-base);
  --cbp-card-danger-decision-color-border:  var(--cbp-color-danger-base);
  --cbp-card-danger-decision-color-border-dark:  var(--cbp-color-danger-light);
  --cbp-card-danger-banner-color: var(--cbp-color-danger-base);
  --cbp-card-danger-banner-color-dark: var(--cbp-color-danger-light);
  --cbp-card-danger-banner-color-background: var(--cbp-color-danger-lighter);
  --cbp-card-danger-banner-color-background-dark: var(--cbp-color-danger-darker);
}


[data-cbp-theme=light] cbp-card[context*=dark],
[data-cbp-theme=dark] cbp-card:not([context=dark-inverts]):not([context=light-always]) {
  --cbp-card-color-background: var(--cbp-card-color-background-dark);
  --cbp-card-color-border: var(--cbp-card-color-border-dark);
  --cbp-card-color-title: var(--cbp-card-color-title-dark);
  --cbp-card-color-text: var(--cbp-card-color-text-dark);

  --cbp-banner-card-color: var(--cbp-banner-card-color-dark);
  --cbp-banner-card-color-title: var(--cbp-banner-card-color-title-dark);
  --cbp-banner-card-color-body-background: var(--cbp-banner-card-color-body-background-dark);
  --cbp-banner-card-border: var(--cbp-banner-card-border-dark);
}

cbp-card {
  display: flex;
  flex-direction: column;
  max-width: 100%;
  background-color: var(--cbp-card-color-background);
  border-radius: var(--cbp-border-radius-softer);
  border-color: var(--cbp-card-color-border);
  border-style: solid;
  border-width: var(--cbp-border-size-md);
  color: var(--cbp-card-color-text);

  .cbp-card-body {
    padding: var(--cbp-space-4x);
    width: 100%;
    max-width: 100%;
    flex-grow: 1;

    :last-child {
      margin-bottom: 0;
    }
  }

  &[stretch] {
    height: 100%;
  }

  [slot=cbp-card-title] {
    display: block;
    color: var(--cbp-card-color-title);
    font-weight: var(--cbp-font-weight-medium);
    font-size: var(--cbp-font-size-heading-lg);
    line-height: var(--cbp-line-height-sm);
  }

  &[color=info] {
    --cbp-card-color-background: var(--cbp-card-info-color-background);
    --cbp-card-color-border: var(--cbp-card-info-border);
    --cbp-card-color-title: var(--cbp-card-info-color-title);

    &[context*=dark],
    &:not([context=dark-inverts]):not([context=light-always]){
      --cbp-card-color-background: var(--cbp-card-info-color-background-dark);
      --cbp-card-color-border: var(--cbp-card-info-border-dark);
      --cbp-card-color-title: var(--cbp-card-info-color-title-dark);
    }
  }

  &[color=success] {
    --cbp-card-color-background: var(--cbp-card-success-color-background);
    --cbp-card-color-border: var(--cbp-card-success-color-border);
    --cbp-card-color-title: var(--cbp-card-success-color-title);

    &[context*=dark],
    &:not([context=dark-inverts]):not([context=light-always]){
      --cbp-card-color-background: var(--cbp-card-success-color-background-dark);
      --cbp-card-color-border: var(--cbp-card-success-color-border-dark);
      --cbp-card-color-title: var(--cbp-card-success-color-title-dark);
    }
  }

  &[color=warning] {
    --cbp-card-color-background: var(--cbp-card-warning-color-background);
    --cbp-card-color-border: var(--cbp-card-warning-border);

    &[context*=dark],
    &:not([context=dark-inverts]):not([context=light-always]){
      --cbp-card-color-background: var(--cbp-card-warning-color-background-dark); 
      --cbp-card-color-border: var(--cbp-card-warning-border-dark);
      --cbp-card-color-title: var(--cbp-color-text-darker);
      --cbp-card-color-text: var(--cbp-color-text-darkest);
    }
  }

  &[color=danger] {
    --cbp-card-color-background: var(--cbp-card-danger-color-background);
    --cbp-card-color-border: var(--cbp-card-danger-color-border);

    &[context*=dark],
    &:not([context=dark-inverts]):not([context=light-always]){
      --cbp-card-color-background: var(--cbp-card-danger-color-background-dark);
      --cbp-card-color-border: var(--cbp-card-danger-color-border-dark); 
    }
  }

  // Decision Card Variant
  &[variant=decision] {
    border: 0;

    & .cbp-card-body {
      border-width: var(--cbp-border-size-md);
      border-style: solid;
      border-color: var(--cbp-banner-card-border);
      border-top-left-radius: var(--cbp-border-radius-softer);
      border-top-right-radius: var(--cbp-border-radius-softer);
      border-bottom: 0;
    }

    & [slot=cbp-card-actions] {
      display: flex;

      cbp-button {
        --cbp-button-border-radius: 0;
        width: 100%;

        &:first-child {
          --cbp-button-border-radius: 0 0 0 var(--cbp-border-radius-softer);
        }
  
        &:last-child {
          --cbp-button-border-radius: 0 0 var(--cbp-border-radius-softer) 0;
        }

        &:first-child:last-child {
          --cbp-button-border-radius: 0 0 var(--cbp-border-radius-softer) var(--cbp-border-radius-softer);
        }
  
        button, a {
          padding-block: var(--cbp-space-3x);
          width: 100%;
        }
      }
    }

    &[color=danger] .cbp-card-body {
      border-color: var(--cbp-card-danger-decision-color-border);

      &[context*=dark],
      &:not([context=dark-inverts]):not([context=light-always]){
        --cbp-card-danger-decision-color-border:  var(--cbp-card-danger-decision-color-border-dark); 
      }
    }
  }

  &[variant=banner] {
    border-color: var(--cbp-banner-card-color);

    &[color=info] {
      --cbp-banner-card-color: var(--cbp-card-info-banner-color);
      --cbp-banner-card-color-body-background: var( --cbp-card-info-banner-color-background);

      &[context*=dark],
      &:not([context=dark-inverts]):not([context=light-always]){  
      --cbp-banner-card-color: var(--cbp-card-info-banner-color-dark);
      --cbp-banner-card-color-body-background: var(--cbp-card-info-banner-color-background-dark);
      }
    }

    &[color=success] {
      --cbp-banner-card-color: var(--cbp-card-success-banner-color);
      --cbp-banner-card-color-body-background: var(--cbp-card-success-banner-color-background);
      
      &[context*=dark],
      &:not([context=dark-inverts]):not([context=light-always]){
        --cbp-banner-card-color: var(--cbp-card-success-banner-color-dark);
        --cbp-banner-card-color-body-background: var(--cbp-card-success-banner-color-background-dark); 
      }
    }

    &[color=warning] {
      --cbp-banner-card-color: var(--cbp-card-warning-banner-color);
      --cbp-banner-card-color-body-background: var(--cbp-card-warning-banner-color-background);
      --cbp-banner-card-color-title: var(--cbp-card-warning-banner-color-title);
    
      &[context*=dark],
      &:not([context=dark-inverts]):not([context=light-always]){
        --cbp-banner-card-color: var(--cbp-card-warning-banner-color-dark);
        --cbp-banner-card-color-body-background: var(--cbp-card-warning-banner-color-background-dark);
        --cbp-banner-card-color-title: var(--cbp-card-warning-banner-color-title-dark);
      }
    }

    &[color=danger] {
      --cbp-banner-card-color: var(--cbp-card-danger-banner-color);
      --cbp-banner-card-color-body-background: var(--cbp-card-danger-banner-color-background);
    
      &[context*=dark],
      &:not([context=dark-inverts]):not([context=light-always]){
        --cbp-banner-card-color: var(--cbp-card-danger-banner-color-dark);
        --cbp-banner-card-color-body-background: var(--cbp-card-danger-banner-color-background-dark);
      }
    }

    [slot=cbp-card-title] {
      background-color: var(--cbp-banner-card-color);
      color: var(--cbp-banner-card-color-title);
      font-size: var(--cbp-font-size-heading-md);
      font-weight: var(--cbp-font-weight-medium);
      padding: var(--cbp-space-3x) var(--cbp-space-4x);
    }

    .cbp-card-body {
      background-color: var(--cbp-banner-card-color-body-background);
    }

  }
}
